<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Gozilla</title>

        <script>
            fetch("header.html")
                .then((r) => r.text())
                .then((html) => document.head.insertAdjacentHTML("beforeend", html));
        </script>
    </head>

    <body>
        <!-- Banner Section -->
        <section id="gozilla-banner" class="text-center py-4">
            <img id="gozilla-banner-img" src="images/gozilla-banner.jpg" class="img-fluid w-100" alt="Gozilla Banner" />
            <button id="download-btn" class="btn btn-light mt-3">Download Gozilla App</button>
        </section>

        <!-- Feature Sections -->
        <section class="container py-5">
            <!-- First Section -->
            <div class="row align-items-center mb-5">
                <div class="col-md-6 text-center text-md-start">
                    <h1><strong>Your cravings live here.</strong></h1>
                    <h2 class="h5">Coffee, Asian food, groceries, gadgets everything you love, one tap away.</h2>
                </div>
                <div class="col-md-6 text-center">
                    <img class="img-fluid" src="images/phone-img-1.jpg" alt="Phone Image 1" />
                </div>
            </div>

            <!-- Second Section -->
            <div class="row align-items-center mb-5">
                <div class="col-md-6 text-center text-md-start order-md-2">
                    <h1><strong>One click. Done.</strong></h1>
                    <h2 class="h5">
                        Your order, your way, right on time — pay by card or cash. Delivery made effortless.
                    </h2>
                </div>
                <div class="col-md-6 text-center order-md-1">
                    <img class="img-fluid" src="images/phone-img-2.jpg" alt="Phone Image 2" />
                </div>
            </div>

            <!-- Third Section -->
            <div class="row align-items-center mb-5">
                <div class="col-md-6 text-center text-md-start">
                    <h1><strong>Real-time tracking.</strong></h1>
                    <h2 class="h5">From order to doorstep watch it every step of the way.</h2>
                </div>
                <div class="col-md-6 text-center">
                    <img class="img-fluid" src="images/phone-img-3.jpg" alt="Phone Image 3" />
                </div>
            </div>
        </section>

        <!-- Partner Section -->
        <section class="container py-5">
            <div class="row g-4 justify-content-center">
                <div class="col-md-5 col-sm-10 text-center">
                    <a href="pages/become-a-partner.html" class="text-decoration-none text-dark">
                        <img src="images/burgers-img.jpg" class="img-fluid mb-3 rounded" alt="Stores & Restaurants" />
                        <h2>Stores & Restaurants</h2>
                        <p>
                            Connect with new customers, grow your business, and deliver to the people who love your
                            brand.
                        </p>
                    </a>
                </div>
                <div class="col-md-5 col-sm-10 text-center">
                    <a href="pages/deliver-for-gozilla.html" class="text-decoration-none text-dark">
                        <img
                            src="images/delivery-motorcycle.png"
                            class="img-fluid mb-3 rounded"
                            alt="Deliver for Gozilla"
                        />
                        <h2>Deliver for Gozilla</h2>
                        <p>Work flexible hours, earn more money, and deliver for the city's trendiest restaurants.</p>
                    </a>
                </div>
            </div>
        </section>

        <!-- Download Section -->
        <section id="download-section" class="text-center py-5 bg-light">
            <h2>Get the Gozilla app today!</h2>
            <div class="d-flex flex-wrap justify-content-center gap-3 mt-3">
                <a href="https://apps.apple.com/us/app/gozilla-delivery-app/id1597480705" target="_blank">
                    <img class="img-fluid" src="images/app-store-img.webp" alt="App Store" style="max-height: 60px" />
                </a>
                <a href="https://play.google.com/store/apps/details?id=com.linkit.gozilla&hl=en" target="_blank">
                    <img
                        class="img-fluid"
                        src="images/google-play-store-img.webp"
                        alt="Google Play Store"
                        style="max-height: 60px"
                    />
                </a>
            </div>
        </section>

        <!-- Reward Backdrop -->
        <div
            id="backdrop"
            class="position-fixed w-100 h-100 d-flex justify-content-center align-items-center"
            style="top: 0; left: 0; background-color: rgba(0, 0, 0, 0.8); z-index: 20002; display: none !important"
        >
            <div id="backdrop-inner" class="text-white text-center">
                <h1 class="mb-2">Congratulations! You won:</h1>
                <h2 id="rewardText"></h2>
                <img id="rewardImg" class="mb-3 img-fluid" style="max-height: 200px" src="" /><br />
                <button onclick="hideBackdrop()" class="btn btn-light">Okay</button>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

        <script>
            document.getElementById("download-btn").addEventListener("click", () => {
                document.getElementById("download-section").scrollIntoView({ behavior: "smooth" });
            });
        </script>

        <script type="module">
            import { Wheel } from "https://cdn.jsdelivr.net/npm/spin-wheel@5.0.2/dist/spin-wheel-esm.js";

            // ----------------------------------------------------------
            // GLOBAL APP OBJECT (only global you have)
            // ----------------------------------------------------------
            window.GZ = {
                wheel: null,
                hasSpun: false,

                // ----------------------------
                // Open the spin modal
                // ----------------------------
                openWheelModal() {
                    if (GZ.hasSpun) return;
                    const modalEl = document.getElementById("spinWheelModal");
                    if (!modalEl) return console.warn("Modal not loaded yet");

                    const modal = bootstrap.Modal.getOrCreateInstance(modalEl);
                    modal.show();
                },

                // ----------------------------
                // Show the reward overlay
                // ----------------------------
                showReward(index) {
                    const backdrop = document.getElementById("backdrop");
                    const rewardText = document.getElementById("rewardText");
                    const rewardImg = document.getElementById("rewardImg");

                    backdrop.style.display = "flex";
                    rewardText.textContent = this.items[index].label;
                    rewardImg.src = this.items[index].image;
                },

                hideReward() {
                    document.getElementById("backdrop").style.display = "none";
                },

                // ----------------------------
                // Spin logic
                // ----------------------------
                cubicOut(t) {
                    const f = t - 1;
                    return f * f * f + 1;
                },

                getRandomIndex() {
                    return Math.floor(Math.random() * this.items.length);
                },

                launchConfetti() {
                    confetti({
                        particleCount: 150,
                        spread: 90,
                        origin: { y: 0.6 },
                        colors: ["#a00498", "#caa0e4", "#d8b4f2", "#b5b4f2"],
                        zIndex: 30000,
                    });
                },

                async spin() {
                    if (!this.wheel || this.hasSpun) return;

                    const spinBtn = document.getElementById("spin-btn");
                    spinBtn.disabled = true;

                    const index = this.getRandomIndex();
                    this.wheel.spinToItem(index, 4000, true, 2, 1, this.cubicOut);

                    setTimeout(() => {
                        this.showReward(index);
                        this.launchConfetti();
                        this.hasSpun = true;

                        const modal = bootstrap.Modal.getInstance(document.getElementById("spinWheelModal"));
                        modal?.hide();
                    }, 4000);
                },
            };

            // ----------------------------------------------------------
            // WHEEL ITEMS (static data, clean)
            // ----------------------------------------------------------
            window.GZ.items = [
                { label: "20% Restaurant Voucher", image: "images/restaurant-voucher-20.png" },
                { label: "Pet Care", image: "images/pet-care.jpg" },
                { label: "Electronics", image: "images/electronics.jpg" },
                { label: "50% Restaurant Voucher", image: "images/restaurant-voucher-50.png" },
                { label: "Baby Products", image: "images/baby-products.jpg" },
                { label: "Free Fitness Sessions", image: "images/fitness-voucher.png" },
                { label: "30% Restaurant Voucher", image: "images/restaurant-voucher-30.png" },
                { label: "Make Up", image: "images/make-up.jpg" },
                { label: "40% Restaurant Voucher", image: "images/restaurant-voucher-40.png" },
                { label: "Gift Box", image: "images/gift-box.jpg" },
            ];

            // ----------------------------------------------------------
            // LOAD NAVBAR — add event listeners after load
            // ----------------------------------------------------------
            fetch("./navbar.html")
                .then((r) => r.text())
                .then((html) => {
                    document.body.insertAdjacentHTML("afterbegin", html);

                    // Add click event to logo button (no inline onclick!)
                    const logoBtn = document.querySelector(".logo");
                    if (logoBtn) {
                        logoBtn.addEventListener("click", () => GZ.openWheelModal());
                    }
                });

            // ----------------------------------------------------------
            // LOAD WHEEL MODAL — initialize wheel when ready
            // ----------------------------------------------------------
            fetch("./wheel-modal.html")
                .then((r) => r.text())
                .then((html) => {
                    document.body.insertAdjacentHTML("beforeend", html);

                    const modal = document.getElementById("spinWheelModal");
                    const spinBtn = modal.querySelector("#spin-btn");

                    modal.addEventListener("shown.bs.modal", () => {
                        const container = modal.querySelector(".wheel-container");
                        container.innerHTML = "";

                        window.GZ.wheel = new Wheel(container, {
                            items: window.GZ.items,
                            borderColor: "#000",
                            borderWidth: 7,
                            itemBackgroundColors: ["#d8b4f2", "#caa0e4", "#b891d9"],
                            lineColor: "#00000088",
                        });

                        window.GZ.wheel.isInteractive = false;
                    });

                    spinBtn.addEventListener("click", () => GZ.spin());
                });
            // Reward overlay close button
            window.hideBackdrop = () => GZ.hideReward();
        </script>
    </body>

    <footer id="footer">
        <script>
            fetch("footer.html")
                .then((r) => r.text())
                .then((html) => {
                    document.querySelector("#footer").insertAdjacentHTML("beforeend", html);
                });
        </script>
    </footer>
</html>

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Become a Partner</title>

        <script>
            fetch("../header.html")
                .then((r) => r.text())
                .then((html) => document.head.insertAdjacentHTML("beforeend", html));
        </script>
    </head>

    <body>
        <!-- <script>
            fetch("../navbar.html")
                .then((r) => r.text())
                .then((html) => document.body.insertAdjacentHTML("afterbegin", html));
        </script> -->

        <div class="thumbnail">
            <img class="thumbnail-img" src="../images/partner-thumbnail.png" />
            <h1 class="thumbnail-text">Quick and Swift Delivery</h1>
        </div>

        <h2 class="text-primary text-center fw-bold mt-5">Partner with us!</h2>
        <h5 class="text-center mb-1">
            We offer an end-to-end logistics service that makes it incredibly easy to deliver to customers everywhere.
        </h5>
        <h5 class="text-center mb-3" dir="rtl">
            نحن نقدم خدمة لوجستية شاملة تجعل من السهل جدا توصيلها للعملاء في كل مكان
        </h5>

        <div class="text-center">
            <button type="button" class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#partnerModal">
                Apply for Partnership
            </button>
        </div>

        <div class="container">
            <div class="row text-center mb-5">
                <div class="col-12 col-md-4 mb-4 mb-md-0">
                    <img class="apply-img img-fluid" src="../images/partner-img-1.png" alt="" />
                    <h5>BOOST SALES & VISIBILITY</h5>
                    <h6>More customers. More sales. Growth made easy.</h6>
                </div>
                <div class="col-12 col-md-4 mb-4 mb-md-0">
                    <img class="apply-img img-fluid" src="../images/partner-img-2.png" alt="" />
                    <h5>ADVANCED DIGITAL PLATFORM</h5>
                    <h6>
                        Showcase your products with high-quality visuals and update your menu in real time. A refined,
                        intuitive online experience.
                    </h6>
                </div>
                <div class="col-12 col-md-4">
                    <img class="apply-img img-fluid" src="../images/partner-img-3.png" alt="" />
                    <h5>SEAMLESS END-TO-END DELIVERY</h5>
                    <h6>Efficient delivery. Full operational handling. Exceptional support from start to finish.</h6>
                </div>
            </div>
        </div>

        <div class="container mb-5">
            <div class="row justify-content-center">
                <div class="col-2 mb-2 text-center">
                    <img src="../images/crepaway-logo.png" class="img-fluid" style="width: 80px; height: 80px" alt="" />
                </div>
                <div class="col-2 mb-2 text-center">
                    <img src="../images/kfc-logo.png" class="img-fluid" style="width: 80px; height: 80px" alt="" />
                </div>
                <div class="col-2 mb-2 text-center">
                    <img src="../images/sibon-logo.jpeg" class="img-fluid" style="width: 80px; height: 80px" alt="" />
                </div>
                <div class="col-2 mb-2 text-center">
                    <img src="../images/dunkin-logo.png" class="img-fluid" style="width: 80px; height: 80px" alt="" />
                </div>
                <div class="col-2 mb-2 text-center">
                    <img src="../images/kababji-logo.png" class="img-fluid" style="width: 80px; height: 80px" alt="" />
                </div>
                <div class="col-2 mb-2 text-center">
                    <img
                        src="../images/seasweet-logo.jpeg"
                        class="img-fluid"
                        style="width: 80px; height: 80px"
                        alt=""
                    />
                </div>
                <div class="col-2 mb-2 text-center">
                    <img
                        src="../images/mcdonalds-logo.png"
                        class="img-fluid"
                        style="width: 80px; height: 80px"
                        alt=""
                    />
                </div>
                <div class="col-2 mb-2 text-center">
                    <img
                        src="../images/starbucks-logo.png"
                        class="img-fluid"
                        style="width: 80px; height: 80px"
                        alt=""
                    />
                </div>
                <div class="col-2 mb-2 text-center">
                    <img
                        src="../images/hawa-chicken-logo.jpeg"
                        class="img-fluid"
                        style="width: 80px; height: 80px"
                        alt=""
                    />
                </div>
                <div class="col-2 mb-2 text-center">
                    <img
                        src="../images/labeille-dor-logo.jpeg"
                        class="img-fluid"
                        style="width: 80px; height: 80px"
                        alt=""
                    />
                </div>
                <div class="col-2 mb-2 text-center">
                    <img
                        src="../images/malak-al-tawouk-logo.png"
                        class="img-fluid"
                        style="width: 80px; height: 80px"
                        alt=""
                    />
                </div>
                <div class="col-2 mb-2 text-center">
                    <img
                        src="../images/sandwich-w-noss-logo.png"
                        class="img-fluid"
                        style="width: 80px; height: 80px"
                        alt=""
                    />
                </div>
            </div>
        </div>

        <div class="text-center mb-5">
            <button type="button" class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#joinModal">
                Join Now
            </button>
        </div>

        <div
            id="backdrop"
            class="position-fixed w-100 h-100"
            style="top: 0; left: 0; background-color: rgba(0, 0, 0, 0.8); z-index: 20002; display: none"
        >
            <div id="backdrop-inner" class="text-white text-center">
                <h1 class="mr-2">Congratulations! You won:</h1>
                <h2 id="rewardText"></h2>
                <img id="rewardImg" class="mb-3" style="height: 200px" src="" /><br />
                <button onclick="hideBackdrop()" class="btn btn-light">Okay</button>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

        <script type="module">
            import { Wheel } from "https://cdn.jsdelivr.net/npm/spin-wheel@5.0.2/dist/spin-wheel-esm.js";

            // ----------------------------------------------------------
            // GLOBAL APP OBJECT (only global you have)
            // ----------------------------------------------------------
            window.GZ = {
                wheel: null,
                hasSpun: false,

                // ----------------------------
                // Open the spin modal
                // ----------------------------
                openWheelModal() {
                    if (GZ.hasSpun) return;
                    const modalEl = document.getElementById("spinWheelModal");
                    if (!modalEl) return console.warn("Modal not loaded yet");

                    const modal = bootstrap.Modal.getOrCreateInstance(modalEl);
                    modal.show();
                },

                // ----------------------------
                // Show the reward overlay
                // ----------------------------
                showReward(index) {
                    const backdrop = document.getElementById("backdrop");
                    const rewardText = document.getElementById("rewardText");
                    const rewardImg = document.getElementById("rewardImg");

                    backdrop.style.display = "flex";
                    rewardText.textContent = this.items[index].label;
                    rewardImg.src = this.items[index].image;
                },

                hideReward() {
                    document.getElementById("backdrop").style.display = "none";
                },

                // ----------------------------
                // Spin logic
                // ----------------------------
                cubicOut(t) {
                    const f = t - 1;
                    return f * f * f + 1;
                },

                getRandomIndex() {
                    return Math.floor(Math.random() * this.items.length);
                },

                launchConfetti() {
                    confetti({
                        particleCount: 150,
                        spread: 90,
                        origin: { y: 0.6 },
                        colors: ["#a00498", "#caa0e4", "#d8b4f2", "#b5b4f2"],
                        zIndex: 30000,
                    });
                },

                async spin() {
                    if (!this.wheel || this.hasSpun) return;

                    const spinBtn = document.getElementById("spin-btn");
                    spinBtn.disabled = true;

                    const index = this.getRandomIndex();
                    this.wheel.spinToItem(index, 4000, true, 2, 1, this.cubicOut);

                    setTimeout(() => {
                        this.showReward(index);
                        this.launchConfetti();
                        this.hasSpun = true;

                        const modal = bootstrap.Modal.getInstance(document.getElementById("spinWheelModal"));
                        modal?.hide();
                    }, 4000);
                },
            };

            // ----------------------------------------------------------
            // WHEEL ITEMS (static data, clean)
            // ----------------------------------------------------------
            window.GZ.items = [
                { label: "20% Restaurant Voucher", image: "images/restaurant-voucher-20.png" },
                { label: "Pet Care", image: "images/pet-care.jpg" },
                { label: "Electronics", image: "images/electronics.jpg" },
                { label: "50% Restaurant Voucher", image: "images/restaurant-voucher-50.png" },
                { label: "Baby Products", image: "images/baby-products.jpg" },
                { label: "Free Fitness Sessions", image: "images/fitness-voucher.png" },
                { label: "30% Restaurant Voucher", image: "images/restaurant-voucher-30.png" },
                { label: "Make Up", image: "images/make-up.jpg" },
                { label: "40% Restaurant Voucher", image: "images/restaurant-voucher-40.png" },
                { label: "Gift Box", image: "images/gift-box.jpg" },
            ];

            // ----------------------------------------------------------
            // LOAD NAVBAR — add event listeners after load
            // ----------------------------------------------------------
            fetch("../navbar.html")
                .then((r) => r.text())
                .then((html) => {
                    document.body.insertAdjacentHTML("afterbegin", html);

                    // Add click event to logo button (no inline onclick!)
                    const logoBtn = document.querySelector(".logo");
                    if (logoBtn) {
                        logoBtn.addEventListener("click", () => GZ.openWheelModal());
                    }
                });

            // ----------------------------------------------------------
            // LOAD WHEEL MODAL — initialize wheel when ready
            // ----------------------------------------------------------
            fetch("../wheel-modal.html")
                .then((r) => r.text())
                .then((html) => {
                    document.body.insertAdjacentHTML("beforeend", html);

                    const modal = document.getElementById("spinWheelModal");
                    const spinBtn = modal.querySelector("#spin-btn");

                    modal.addEventListener("shown.bs.modal", () => {
                        const container = modal.querySelector(".wheel-container");
                        container.innerHTML = "";

                        window.GZ.wheel = new Wheel(container, {
                            items: window.GZ.items,
                            borderColor: "#000",
                            borderWidth: 7,
                            itemBackgroundColors: ["#d8b4f2", "#caa0e4", "#b891d9"],
                            lineColor: "#00000088",
                        });

                        window.GZ.wheel.isInteractive = false;
                    });

                    spinBtn.addEventListener("click", () => GZ.spin());
                });

            // Reward overlay close button
            window.hideBackdrop = () => GZ.hideReward();
        </script>
    </body>

    <footer id="footer">
        <script>
            fetch("../footer.html")
                .then((r) => r.text())
                .then((html) => {
                    document.querySelector("#footer").insertAdjacentHTML("beforeend", html);
                });
        </script>
    </footer>

    <!-- Partner Modal -->
    <div class="modal fade" id="partnerModal" tabindex="-1" aria-labelledby="partnerModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="partnerModalLabel">Become a Partner / انضم كشريك</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">
                    <form>
                        <!-- Contact Name -->
                        <div class="mb-3">
                            <label class="form-label">Contact Name / <span dir="rtl">اسم جهة الاتصال</span></label>
                            <input type="text" class="form-control" placeholder="" />
                        </div>

                        <!-- Store / Restaurant Name -->
                        <div class="mb-3">
                            <label class="form-label"
                                >Store, Restaurant Name / <span dir="rtl">اسم المتجر، المطعم</span></label
                            >
                            <input type="text" class="form-control" placeholder="" />
                        </div>

                        <!-- Legal Papers -->
                        <div class="mb-3">
                            <label class="form-label"
                                >Legal Papers Available? / <span dir="rtl">هل الأوراق القانونية متوفرة؟</span></label
                            >

                            <select class="form-select">
                                <option value="" selected disabled>Choose / اختر</option>
                                <option>Yes / نعم</option>
                                <option>No / لا</option>
                            </select>
                        </div>

                        <!-- Phone Number -->
                        <div class="mb-3">
                            <label class="form-label">Phone Number / <span dir="rtl">رقم الهاتف</span></label>
                            <input type="tel" class="form-control" placeholder="" />
                        </div>

                        <!-- Location -->
                        <div class="mb-3">
                            <label class="form-label">Location / <span dir="rtl">الموقع</span></label>
                            <input type="text" class="form-control" placeholder="" />
                        </div>

                        <!-- Email -->
                        <div class="mb-3">
                            <label class="form-label">Email / <span dir="rtl">الإيميل</span></label>
                            <input type="email" class="form-control" placeholder="" />
                        </div>
                    </form>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Join Modal -->
    <div class="modal fade" id="joinModal" tabindex="-1" aria-labelledby="joinModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="joinModalLabel">Become a Partner / انضم كشريك</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-body">
                    <form>
                        <div class="row">
                            <!-- First Name -->
                            <div class="col-12 col-md-6 mb-3">
                                <label class="form-label">First Name / <span dir="rtl">الاسم الأول</span></label>
                                <input type="text" class="form-control" placeholder="" />
                            </div>

                            <!-- Last Name -->
                            <div class="col-12 col-md-6 mb-3">
                                <label class="form-label">Last Name / <span dir="rtl">اسم العائلة</span></label>
                                <input type="text" class="form-control" placeholder="" />
                            </div>
                        </div>

                        <!-- Email -->
                        <div class="mb-3">
                            <label class="form-label">Email Address / <span dir="rtl">البريد الإلكتروني</span></label>
                            <input type="email" class="form-control" placeholder="" />
                        </div>

                        <!-- Store/Restaurant Name -->
                        <div class="mb-3">
                            <label class="form-label"
                                >Store/Restaurant Name / <span dir="rtl">اسم المتجر/المطعم</span></label
                            >
                            <input type="text" class="form-control" placeholder="" />
                        </div>

                        <!-- Message -->
                        <div class="mb-3">
                            <label class="form-label">Message / <span dir="rtl">الرسالة</span></label>
                            <textarea class="form-control" rows="4" placeholder=""></textarea>
                        </div>
                    </form>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
            </div>
        </div>
    </div>
</html>

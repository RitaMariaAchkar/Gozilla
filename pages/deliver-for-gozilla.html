<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Deliver for Gozilla</title>

        <script>
            fetch("../header.html")
                .then((r) => r.text())
                .then((html) => document.head.insertAdjacentHTML("beforeend", html));
        </script>
    </head>

    <body>
        <!-- <script>
            fetch("../navbar.html")
                .then((r) => r.text())
                .then((html) => document.body.insertAdjacentHTML("afterbegin", html));
        </script> -->

        <h1 class="text-center my-4"><strong>Deliver for Gozilla</strong></h1>
        <h2 class="text-center mb-4">
            Enjoy flexible work hours, attractive pay, and a reliable support team ready to help.
        </h2>

        <hr class="w-75" style="margin: 0 auto" />

        <h5 class="text-center my-4">
            We're on the hunt for energetic, tech-friendly drivers to join our rapidly expanding startup. Think you're a
            fit? Submit your details through the form.
        </h5>

        <div class="container my-4">
            <form id="applyForm" class="mx-auto" style="max-width: 800px">
                <!-- Name -->
                <div class="mb-4">
                    <h6>Name/الاسم</h6>
                    <div class="row g-3">
                        <div class="col-12 col-md-6">
                            <input
                                type="text"
                                class="form-control"
                                placeholder="First Name/الاسم الأول"
                                aria-label="First Name/الاسم الأول"
                            />
                        </div>
                        <div class="col-12 col-md-6">
                            <input
                                type="text"
                                class="form-control"
                                placeholder="Last Name/اسم العائلة"
                                aria-label="Last Name/اسم العائلة"
                            />
                        </div>
                    </div>
                </div>

                <!-- More Info -->
                <div class="mb-4">
                    <h6>More Info/مزيد من المعلومات</h6>
                    <div class="row g-3">
                        <div class="col-12 col-md-6">
                            <input
                                type="text"
                                class="form-control"
                                placeholder="Mobile Number/رقم الهاتف"
                                aria-label="Mobile Number/رقم الهاتف"
                            />
                        </div>
                        <div class="col-12 col-md-6">
                            <input
                                type="text"
                                class="form-control"
                                placeholder="Nationality/الجنسية"
                                aria-label="Nationality/الجنسية"
                            />
                        </div>
                    </div>
                </div>

                <!-- Current Location -->
                <div class="mb-4">
                    <h6>Current Location/الموقع الحالي</h6>
                    <select class="form-select" aria-label="Default select example">
                        <option selected>Select an option</option>
                        <option value="Beirut - Lebanon">Beirut - Lebanon</option>
                        <option value="Matn - Lebanon">Matn - Lebanon</option>
                        <option value="Hazmieh - Lebanon">Hazmieh - Lebanon</option>
                        <option value="Mansourieh  - Lebanon">Mansourieh - Lebanon</option>
                        <option value="Broumana - Lebanon">Broumana - Lebanon</option>
                        <option value="Keserwan - Lebanon">Keserwan - Lebanon</option>
                        <option value="Qlayaat - Lebanon">Qlayaat - Lebanon</option>
                        <option value="Faqra - Lebanon">Faqra - Lebanon</option>
                        <option value="Jbeil - Lebanon">Jbeil - Lebanon</option>
                        <option value="Batroun - Lebanon">Batroun - Lebanon</option>
                        <option value="Tripoli - Lebanon">Tripoli - Lebanon</option>
                        <option value="Khalde - Lebanon">Khalde - Lebanon</option>
                        <option value="Saida - Lebanon">Saida - Lebanon</option>
                    </select>
                </div>

                <!-- Other Job -->
                <div class="mb-4">
                    <h6>Do you have another job?/هل لديك وظيفة أخرى؟</h6>
                    <select class="form-select" aria-label="Default select example">
                        <option selected>Select an option</option>
                        <option value="yes">Yes/نعم</option>
                        <option value="no">No/كلّا</option>
                    </select>
                </div>

                <!-- Languages -->
                <div class="mb-4">
                    <h6>Languages/اللغات</h6>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="enCheck" />
                        <label class="form-check-label" for="enCheck">English/الإنجليزية</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="arCheck" />
                        <label class="form-check-label" for="arCheck">Arabic/العربية</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="frCheck" />
                        <label class="form-check-label" for="frCheck">French/الفرنسية</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="otherCheck" />
                        <label class="form-check-label" for="otherCheck">Other/غيره</label>
                    </div>
                </div>

                <!-- Transportation -->
                <div class="mb-4">
                    <h5>Type of transportation/طريقة التنقل</h5>
                    <div class="form-check">
                        <input
                            class="form-check-input"
                            type="radio"
                            name="transport"
                            id="motorcycleOption"
                            value="motorcycle"
                            checked
                        />
                        <label class="form-check-label" for="motorcycleOption">Motorcycle</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="transport" id="carOption" value="car" />
                        <label class="form-check-label" for="carOption">Car</label>
                    </div>
                    <div class="form-check">
                        <input
                            class="form-check-input"
                            type="radio"
                            name="transport"
                            id="motorcycleCarOption"
                            value="both"
                        />
                        <label class="form-check-label" for="motorcycleCarOption">Motorcycle and Car</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="transport" id="noOption" value="none" />
                        <label class="form-check-label" for="noOption">I don't own a vehicle</label>
                    </div>
                </div>

                <!-- Date of Birth -->
                <div class="mb-4">
                    <label for="birthDate" class="form-label">Date of Birth/تاريخ الولادة</label>
                    <input type="date" class="form-control" id="birthDate" name="birthDate" />
                </div>

                <!-- Submit -->
                <div class="text-center">
                    <button type="submit" class="btn btn-primary">Apply</button>
                </div>
            </form>
        </div>

        <div class="container">
            <div class="row text-center mb-5">
                <div class="col-12 col-md-4 mb-4 mb-md-0">
                    <img class="apply-img img-fluid" src="../images/apply-img-1.png" alt="" />
                    <h5>SET YOUR OWN SCHEDULE</h5>
                    <h6>Pick your hours and work whenever it suits you.</h6>
                </div>
                <div class="col-12 col-md-4 mb-4 mb-md-0">
                    <img class="apply-img img-fluid" src="../images/apply-img-2.png" alt="" />
                    <h5>BOOST YOUR INCOME</h5>
                    <h6>The more you put in, the more you earn. We value your effort.</h6>
                </div>
                <div class="col-12 col-md-4">
                    <img class="apply-img img-fluid" src="../images/apply-img-3.png" alt="" />
                    <h5>WORK WITH TOP PARTNERS</h5>
                    <h6>Deliver for the city's leading restaurants and stores.</h6>
                </div>
            </div>
        </div>

        <div
            id="backdrop"
            class="position-fixed w-100 h-100"
            style="top: 0; left: 0; background-color: rgba(0, 0, 0, 0.8); z-index: 20002; display: none"
        >
            <div id="backdrop-inner" class="text-white text-center">
                <h1 class="mr-2">Congratulations! You won:</h1>
                <h2 id="rewardText"></h2>
                <img id="rewardImg" class="mb-3" style="height: 200px" src="" /><br />
                <button onclick="hideBackdrop()" class="btn btn-light">Okay</button>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

        <script type="module">
            import { Wheel } from "https://cdn.jsdelivr.net/npm/spin-wheel@5.0.2/dist/spin-wheel-esm.js";

            // ----------------------------------------------------------
            // GLOBAL APP OBJECT (only global you have)
            // ----------------------------------------------------------
            window.GZ = {
                wheel: null,
                hasSpun: false,

                // ----------------------------
                // Open the spin modal
                // ----------------------------
                openWheelModal() {
                    if (GZ.hasSpun) return;
                    const modalEl = document.getElementById("spinWheelModal");
                    if (!modalEl) return console.warn("Modal not loaded yet");

                    const modal = bootstrap.Modal.getOrCreateInstance(modalEl);
                    modal.show();
                },

                // ----------------------------
                // Show the reward overlay
                // ----------------------------
                showReward(index) {
                    const backdrop = document.getElementById("backdrop");
                    const rewardText = document.getElementById("rewardText");
                    const rewardImg = document.getElementById("rewardImg");

                    backdrop.style.display = "flex";
                    rewardText.textContent = this.items[index].label;
                    rewardImg.src = this.items[index].image;
                },

                hideReward() {
                    document.getElementById("backdrop").style.display = "none";
                },

                // ----------------------------
                // Spin logic
                // ----------------------------
                cubicOut(t) {
                    const f = t - 1;
                    return f * f * f + 1;
                },

                getRandomIndex() {
                    return Math.floor(Math.random() * this.items.length);
                },

                launchConfetti() {
                    confetti({
                        particleCount: 150,
                        spread: 90,
                        origin: { y: 0.6 },
                        colors: ["#a00498", "#caa0e4", "#d8b4f2", "#b5b4f2"],
                        zIndex: 30000,
                    });
                },

                async spin() {
                    if (!this.wheel || this.hasSpun) return;

                    const spinBtn = document.getElementById("spin-btn");
                    spinBtn.disabled = true;

                    const index = this.getRandomIndex();
                    this.wheel.spinToItem(index, 4000, true, 2, 1, this.cubicOut);

                    setTimeout(() => {
                        this.showReward(index);
                        this.launchConfetti();
                        this.hasSpun = true;

                        const modal = bootstrap.Modal.getInstance(document.getElementById("spinWheelModal"));
                        modal?.hide();
                    }, 4000);
                },
            };

            // ----------------------------------------------------------
            // WHEEL ITEMS (static data, clean)
            // ----------------------------------------------------------
            window.GZ.items = [
                { label: "20% Restaurant Voucher", image: "images/restaurant-voucher-20.png" },
                { label: "Pet Care", image: "images/pet-care.jpg" },
                { label: "Electronics", image: "images/electronics.jpg" },
                { label: "50% Restaurant Voucher", image: "images/restaurant-voucher-50.png" },
                { label: "Baby Products", image: "images/baby-products.jpg" },
                { label: "Free Fitness Sessions", image: "images/fitness-voucher.png" },
                { label: "30% Restaurant Voucher", image: "images/restaurant-voucher-30.png" },
                { label: "Make Up", image: "images/make-up.jpg" },
                { label: "40% Restaurant Voucher", image: "images/restaurant-voucher-40.png" },
                { label: "Gift Box", image: "images/gift-box.jpg" },
            ];

            // ----------------------------------------------------------
            // LOAD NAVBAR — add event listeners after load
            // ----------------------------------------------------------
            fetch("../navbar.html")
                .then((r) => r.text())
                .then((html) => {
                    document.body.insertAdjacentHTML("afterbegin", html);

                    // Add click event to logo button (no inline onclick!)
                    const logoBtn = document.querySelector(".logo");
                    if (logoBtn) {
                        logoBtn.addEventListener("click", () => GZ.openWheelModal());
                    }
                });

            // ----------------------------------------------------------
            // LOAD WHEEL MODAL — initialize wheel when ready
            // ----------------------------------------------------------
            fetch("../wheel-modal.html")
                .then((r) => r.text())
                .then((html) => {
                    document.body.insertAdjacentHTML("beforeend", html);

                    const modal = document.getElementById("spinWheelModal");
                    const spinBtn = modal.querySelector("#spin-btn");

                    modal.addEventListener("shown.bs.modal", () => {
                        const container = modal.querySelector(".wheel-container");
                        container.innerHTML = "";

                        window.GZ.wheel = new Wheel(container, {
                            items: window.GZ.items,
                            borderColor: "#000",
                            borderWidth: 7,
                            itemBackgroundColors: ["#d8b4f2", "#caa0e4", "#b891d9"],
                            lineColor: "#00000088",
                        });

                        window.GZ.wheel.isInteractive = false;
                    });

                    spinBtn.addEventListener("click", () => GZ.spin());
                });

            // Reward overlay close button
            window.hideBackdrop = () => GZ.hideReward();
        </script>
    </body>

    <footer id="footer">
        <script>
            fetch("../footer.html")
                .then((r) => r.text())
                .then((html) => {
                    document.querySelector("#footer").insertAdjacentHTML("beforeend", html);
                });
        </script>
    </footer>
</html>
